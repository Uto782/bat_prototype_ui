:root{
  --bg:#f7f9fb;
  --card:#ffffff;
  --text:#282E3C;
  --sub:#7a8499;
  --mint:#00C7AC;
  --mint2:#37d6c2;
  --line:#e7ecf3;
  --shadow: 0 18px 40px rgba(0,0,0,.08);
  --shadow2: 0 10px 24px rgba(0,0,0,.08);
  --radius: 34px;
  --radius2: 22px;
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --font: "Noto Sans JP",system-ui,-apple-system,"Hiragino Sans","Hiragino Kaku Gothic ProN",Segoe UI,Roboto,Arial;
}

html,body{height:100%;}
body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.app{min-height:100%;display:flex;flex-direction:column;}

.topbar{
  padding: calc(18px + var(--safe-top)) 18px 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.topbar .left, .topbar .right{width:56px;display:flex;align-items:center;justify-content:center;color:#1f2433;}
.topbar .title{font-weight:800;letter-spacing:.02em;font-size:22px;}

.iconbtn{width:44px;height:44px;border-radius:14px;display:grid;place-items:center;background:transparent;border:0;cursor:pointer;}
.icon{width:22px;height:22px;display:inline-block;}
.icon svg{width:100%;height:100%;}

.content{flex:1;padding: 10px 16px 120px;}

.card{background: var(--card);border-radius: var(--radius);box-shadow: var(--shadow);padding: 22px 18px 18px;}
.card.soft{box-shadow: var(--shadow2);}
.card + .card{ margin-top: 16px; }

.headerRow{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom: 10px;}
.h1{font-size: 28px;font-weight: 900;letter-spacing:.01em;margin:0;}

.badge{display:flex;align-items:center;gap:8px;padding: 8px 14px;border-radius: 999px;border: 2px solid rgba(0,199,172,.95);color: rgba(0,199,172,.95);font-weight: 800;font-size: 14px;white-space:nowrap;user-select:none;}
.badge.off{border-color:#cfd6e3;color:#9aa5bb;}
.dot{width:10px;height:10px;border-radius:999px;background: rgba(0,199,172,.95);}
.badge.off .dot{ background:#cfd6e3; }

.circleWrap{display:flex;align-items:center;justify-content:center;padding: 14px 0 8px;}
.circle{width: 250px;height: 250px;border-radius: 999px;background: #f4f6f8;box-shadow: inset 0 0 0 3px rgba(0,199,172,.15), 0 10px 26px rgba(0,0,0,.08);display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;}
.circle .small{font-weight:900;font-size: 22px;letter-spacing:.02em;margin-bottom: 4px;}
.circle .big{font-weight: 1000;font-size: 92px;line-height: 1;color: var(--mint);letter-spacing: .01em;}
.circle .unit{font-weight: 900;font-size: 24px;margin-left: 10px;color: #2a3142;}
.circle .bigrow{display:flex;align-items:baseline;justify-content:center;}

/* circle is a button in live screen */
.circle{border:0;outline:none;cursor:pointer;-webkit-tap-highlight-color: transparent;}
.circle:active{transform: translateY(1px);}

.batPreview{width: 250px;height: 250px;border-radius: 999px;background: #f4f6f8;box-shadow: inset 0 0 0 2px rgba(0,0,0,.06), 0 10px 26px rgba(0,0,0,.08);display:grid;place-items:center;overflow:hidden;position:relative;cursor:pointer;user-select:none;border:0;}
.batPreview:active{transform: translateY(1px);}
.batPreview .bat{width: 120px;height: 200px;background: linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,0));border-radius: 18px;transform: rotate(-18deg);display:grid;place-items:center;color:#8b93a6;font-weight:900;font-size:14px;}

.batImg{width:78%;height:78%;object-fit:contain;filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));}

.batImg{width: 78%;height: 78%;object-fit: contain;filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));}

.btnRow{display:flex;gap: 14px;margin-top: 14px;}
.pillBtn{flex:1;height: 78px;border-radius: 999px;background: #fff;border: 2px solid #e3e9f2;box-shadow: 0 10px 22px rgba(0,0,0,.08);display:flex;align-items:center;justify-content:center;gap: 12px;font-weight: 900;font-size: 18px;letter-spacing:.02em;cursor:pointer;user-select:none;}
.pillBtn.primary{border-color: rgba(0,199,172,.28);}
.pillBtn:active{transform: translateY(1px);}
.pillBtn[disabled]{opacity:.45;cursor:not-allowed;}

.battery{display:flex;align-items:center;justify-content:space-between;gap:12px;padding: 18px 18px;}
.batteryInner{width:100%;}
.batteryTop{display:flex;align-items:center;justify-content:space-between;}
.batteryLeft{display:flex;align-items:center;gap:10px;font-weight: 900;font-size: 22px;}
.pct{font-weight: 1000;font-size: 44px;color: var(--mint);}
.bar{width:100%;height: 28px;background: #eef2f7;border-radius: 999px;overflow:hidden;box-shadow: inset 0 0 0 2px rgba(0,0,0,.03);margin-top: 12px;}
.bar > div{height:100%;width: 70%;background: linear-gradient(90deg, var(--mint2), var(--mint));border-radius: 999px;}

.sectionTitle{margin: 18px 2px 10px;font-size: 30px;font-weight: 1000;letter-spacing:.02em;}

.nav{position:fixed;left:0;right:0;bottom:0;padding: 8px 10px calc(10px + var(--safe-bottom));background: rgba(255,255,255,.9);backdrop-filter: blur(12px);border-top: 1px solid rgba(0,0,0,.05);display:flex;align-items:flex-end;justify-content:space-around;gap:8px;z-index:50;}
.navItem{width: 74px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap: 6px;color: #a7b0c0;font-weight: 900;font-size: 14px;cursor:pointer;user-select:none;border:0;background:transparent;}
.navItem svg{ width:26px;height:26px; }
.navItem.active{ color: var(--mint); }
.navFab{width: 92px;height: 92px;border-radius: 999px;background: var(--mint);box-shadow: 0 18px 36px rgba(0,199,172,.35);display:grid;place-items:center;margin-top: -42px;border: 8px solid rgba(255,255,255,.86);cursor:pointer;user-select:none;}
.navFab svg{ width:36px;height:36px;color:#fff; }

.screen{ display:none; }
.screen.active{ display:block; }

.historyHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom: 8px;}
.historyHeader .date{font-size: 28px;font-weight: 1000;letter-spacing:.02em;}
.pills{display:flex;gap:10px;align-items:center;}
.pill{display:inline-flex;align-items:center;gap:8px;padding: 8px 14px;border-radius: 999px;border: 2px solid rgba(0,199,172,.95);font-weight: 900;font-size: 14px;white-space:nowrap;user-select:none;}
.pill.mint{ color: rgba(0,199,172,.95); border-color: rgba(0,199,172,.95); }
.pill.pink{ color: #ff6b7a; border-color: #ff6b7a; }

.bubbles{display:flex;flex-direction:column;gap:10px;align-items:center;padding: 8px 0 0;}
.bubble{display:inline-block;padding: 12px 16px;border-radius: 16px;background: #ffd400;color:#1b1d24;font-weight: 1000;font-size: 16px;box-shadow: 0 10px 20px rgba(0,0,0,.12);max-width: 80%;}
.bubble.left{align-self:flex-start;margin-left:20px;}

.chart{width:100%;height: 390px;border-radius: 26px;overflow:hidden;background: linear-gradient(180deg, rgba(0,199,172,.06), rgba(255,255,255,0));position:relative;margin-top: 10px;}
.xlabels{position:absolute;left:0;right:0;bottom:10px;display:flex;justify-content:space-between;padding: 0 10px;color:#9aa5bb;font-weight: 900;letter-spacing:.04em;}
.xlabels span{display:inline-flex;align-items:flex-end;gap:6px;}
.v{writing-mode: vertical-rl;text-orientation: mixed;font-size: 16px;}
.xsub{font-size:12px;color:#c1c8d6;}

.rowCard{display:flex;align-items:center;justify-content:space-between;gap:12px;padding: 18px 18px;}
.rowLeft{display:flex;align-items:center;gap:14px;}
.avatar{width: 64px;height:64px;border-radius: 999px;background:#f4f6f8;box-shadow: inset 0 0 0 2px rgba(0,0,0,.06);display:grid;place-items:center;color:#9aa5bb;font-weight: 1000;}
.name{font-weight: 1000;font-size: 26px;letter-spacing:.02em;}
.count{font-weight: 1000;font-size: 44px;color: var(--mint);letter-spacing:.01em;white-space:nowrap;}
.countUnit{font-size: 20px;margin-left: 6px;}

.toast{position:fixed;left: 50%;transform: translateX(-50%);bottom: calc(110px + var(--safe-bottom));background: rgba(32,37,51,.92);color:#fff;padding: 10px 14px;border-radius: 14px;font-weight: 900;font-size: 14px;box-shadow: 0 14px 26px rgba(0,0,0,.2);display:none;z-index:60;max-width: 90%;text-align:center;}
.toast.show{ display:block; }

.debug{margin-top: 14px;background: #f6f8fb;border-radius: 18px;padding: 12px 12px;border: 1px solid rgba(0,0,0,.04);}
.debugTitle{font-weight: 1000;font-size: 12px;color:#7a8499;margin-bottom: 10px;letter-spacing:.06em;}
.debugRow{display:flex;gap:10px;flex-wrap:wrap;}
.debugBtn{border:0;background:#ffffff;border-radius: 999px;padding: 10px 12px;font-weight: 1000;cursor:pointer;box-shadow: 0 10px 18px rgba(0,0,0,.06);}

.tinyActions{display:flex;justify-content:center;margin-top: 12px;}
.miniBtn{border:0;background: transparent;color: var(--mint);font-weight: 1000;cursor:pointer;padding: 8px 10px;border-radius: 12px;}
.miniBtn:active{transform: translateY(1px);}

.sheet{position:fixed;left:0;right:0;top:0;bottom:0;z-index:80;}
.sheetBackdrop{position:absolute;left:0;right:0;top:0;bottom:0;background: rgba(0,0,0,.35);}
.sheetPanel{position:absolute;left:0;right:0;bottom:0;background:#fff;border-top-left-radius: 26px;border-top-right-radius: 26px;padding: 14px 14px calc(16px + var(--safe-bottom));box-shadow: 0 -18px 46px rgba(0,0,0,.16);}
.sheetHeader{display:flex;align-items:center;justify-content:space-between;padding: 6px 6px 10px;}
.sheetTitle{font-weight: 1000;font-size: 18px;}
.sheetClose{border:0;background: transparent;color: var(--mint);font-weight: 1000;cursor:pointer;padding: 10px 12px;border-radius: 12px;}
.sheetBody{display:flex;flex-direction:column;gap:12px;padding: 6px;}
.field{display:flex;flex-direction:column;gap:8px;}
.fieldLabel{font-weight: 1000;color:#7a8499;font-size: 12px;letter-spacing:.06em;}
.fieldInput{border-radius: 16px;border: 2px solid #e7ecf3;padding: 12px 12px;font-weight: 900;font-size: 16px;outline:none;}
.fieldInput:focus{border-color: rgba(0,199,172,.45);}
.sheetRow{display:flex;gap:10px;}
.sheetBtn{flex:1;border:0;border-radius: 16px;background:#f6f8fb;padding: 12px 10px;font-weight: 1000;cursor:pointer;}
.sheetBtn:active{transform: translateY(1px);}
.sheetBtn.danger{background: #ffe9ec;color:#a72b38;}
.sheetHint{font-size: 12px;color:#7a8499;line-height: 1.5;}
